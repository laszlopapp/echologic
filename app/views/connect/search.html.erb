<% @function_name = 'connect_search' %>

<%=
  if current_user.profile.completeness.nil? ||
       current_user.profile.completeness < Profile::COMPLETENESS_THRESHOLD
    render 'connect/fill_out_profile'
  end
%>

<div id="connect_search_container" class="search_container">
  <% content_tag :div, :id => 'search_form', :class => 'ajax_form' do %>
    <%= content_tag :span, '',
                    :class => 'search_field' %>
    <%= text_field_tag :search_terms,
        @value,
        :class => 'tag_value_autocomplete',
        'data-default' => I18n.t("connect.placeholder") %>
    <%= hidden_field_tag :sort, @sort %>
  	<%= content_tag :span, '',
                    :name => 'submit_button',
                    :class => 'submit_button',
                    :alt => 'search_button' %>
  <% end %>
</div>

<%= render :partial => 'connect/profiles/results' %>

<%= render :partial => 'connect/profiles/details',
           :locals => {:profile => @profile} %>
